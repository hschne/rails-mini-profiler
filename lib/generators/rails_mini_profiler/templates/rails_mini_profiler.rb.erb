RailsMiniProfiler.configure do |config|
  # Customize when Rails Mini Profiler should run
  config.enabled = proc { |env| Rails.env.development? || env['HTTP_RMP_ENABLED'].present? }

  # Configure how hedgehog badge is rendered
  config.badge_enabled = true
  # config.badge_position = 'top-left'

  # Configure Flamegraph generation
  config.flamegraph_enabled = true
  # config.flamegraph_sample_rate = 0.5

  # Configure endpoints to profile
  config.skip_paths = []

  # Configure how Rails Mini Profiler stores profiling information
  # config.storage.database = :rmp_database
  # config.storage.profiled_requests_table = :rmp_profiled_requests
  # config.storage.traces_table = :rmp_traces
  # config.storage.flamegraphs_table = :rmp_flamegraphs

  # Configure the Rails Mini Profiler User Interface
  # config.ui.page_size = 25

  # Customize how users are detected
  config.user_provider = proc { |env| Rack::Request.new(env).ip }
end
